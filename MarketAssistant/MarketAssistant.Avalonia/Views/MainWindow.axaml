<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MarketAssistant.Avalonia.ViewModels"
        xmlns:infra="using:MarketAssistant.Avalonia.Infrastructure"
        xmlns:converts="using:MarketAssistant.Avalonia.Converts"
        xmlns:svg="clr-namespace:Avalonia.Svg.Skia;assembly=Svg.Controls.Skia.Avalonia"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="MarketAssistant.Avalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/trans_bg.ico"
        Title="MarketAssistant - æ™ºèƒ½è‚¡ç¥¨åˆ†æžåŠ©æ‰‹"
        MinWidth="800"
        MinHeight="600">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Resources>
        <infra:ViewLocator x:Key="ViewLocator"/>
        <converts:NavigationIconConverter x:Key="NavigationIconConverter"/>
    </Window.Resources>

    <Grid ColumnDefinitions="72,*">
        <!-- å·¦ä¾§å›¾æ ‡å¯¼èˆªæ  -->
        <Border Grid.Column="0" 
                Background="{DynamicResource SolidBackgroundFillColorSecondaryBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,1,0">
            <StackPanel Margin="0,20,0,0" Spacing="4">
                <!-- åº”ç”¨Logoå›¾æ ‡ -->
                <Border Margin="0,0,0,24" 
                        Width="48"
                        Height="48"
                        Background="{DynamicResource SystemAccentColor}"
                        CornerRadius="12"
                        HorizontalAlignment="Center"
                        ToolTip.Tip="MarketAssistant">
                    <TextBlock Text="ðŸ“ˆ" 
                               FontSize="28" 
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>

                <!-- å¯¼èˆªèœå• -->
                <ListBox ItemsSource="{Binding NavigationItems}"
                         SelectedItem="{Binding SelectedNavigationItem}"
                         Background="Transparent"
                         BorderThickness="0"
                         Padding="0">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Padding" Value="0"/>
                            <Setter Property="Margin" Value="12,4"/>
                            <Setter Property="Width" Value="48"/>
                            <Setter Property="Height" Value="48"/>
                            <Setter Property="CornerRadius" Value="12"/>
                            <Setter Property="Background" Value="Transparent"/>
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                        </Style>
                        <Style Selector="ListBoxItem:selected">
                            <Setter Property="Background" Value="{DynamicResource SystemAccentColor}"/>
                        </Style>
                        <Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="{DynamicResource SubtleFillColorSecondaryBrush}"/>
                        </Style>
                        <Style Selector="ListBoxItem:selected:pointerover /template/ ContentPresenter">
                            <Setter Property="Background" Value="{DynamicResource SystemAccentColorDark1}"/>
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate x:DataType="vm:NavigationItemViewModel">
                            <Svg Width="24" 
                                 Height="24"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"
                                 ToolTip.Tip="{Binding Title}">
                                <Svg.Path>
                                    <MultiBinding Converter="{StaticResource NavigationIconConverter}">
                                        <Binding Path="."/>
                                        <Binding Path="IsSelected" RelativeSource="{RelativeSource AncestorType=ListBoxItem}"/>
                                    </MultiBinding>
                                </Svg.Path>
                            </Svg>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>

        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
        <ContentControl Grid.Column="1" 
                        Content="{Binding CurrentPage}"
                        ContentTemplate="{StaticResource ViewLocator}"/>
    </Grid>

</Window>
