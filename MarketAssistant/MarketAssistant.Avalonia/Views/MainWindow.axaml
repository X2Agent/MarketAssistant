<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:MarketAssistant.Avalonia.ViewModels"
        xmlns:infra="using:MarketAssistant.Avalonia.Infrastructure"
        xmlns:converts="using:MarketAssistant.Avalonia.Converts"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="MarketAssistant.Avalonia.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="MarketAssistant - æ™ºèƒ½è‚¡ç¥¨åˆ†æžåŠ©æ‰‹"
        MinWidth="800"
        MinHeight="600">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Window.Resources>
        <infra:ViewLocator x:Key="ViewLocator"/>
        <converts:NavigationIconConverter x:Key="NavigationIconConverter"/>
    </Window.Resources>

    <Grid ColumnDefinitions="250,*">
        <!-- å·¦ä¾§å¯¼èˆªæ  -->
        <Border Grid.Column="0" 
                Background="{DynamicResource SolidBackgroundFillColorSecondaryBrush}"
                BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                BorderThickness="0,0,1,0">
            <StackPanel Margin="0,16,0,0">
                <!-- åº”ç”¨æ ‡é¢˜ -->
                <Border Margin="16,0,16,24" 
                        Padding="12"
                        Background="{DynamicResource SystemAccentColorLight3}"
                        CornerRadius="8">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <TextBlock Text="ðŸ“ˆ" FontSize="20" VerticalAlignment="Center"/>
                        <TextBlock Text="MarketAssistant" 
                                   FontSize="16" 
                                   FontWeight="SemiBold" 
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- å¯¼èˆªèœå• -->
                <ListBox ItemsSource="{Binding NavigationItems}"
                         SelectedItem="{Binding SelectedNavigationItem}"
                         Background="Transparent"
                         BorderThickness="0">
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="Padding" Value="16,12"/>
                            <Setter Property="Margin" Value="8,2"/>
                            <Setter Property="CornerRadius" Value="8"/>
                            <Setter Property="Background" Value="Transparent"/>
                        </Style>
                        <Style Selector="ListBoxItem:selected">
                            <Setter Property="Background" Value="{DynamicResource SystemAccentColorLight2}"/>
                        </Style>
                        <Style Selector="ListBoxItem:pointerover">
                            <Setter Property="Background" Value="{DynamicResource SubtleFillColorSecondaryBrush}"/>
                        </Style>
                        <Style Selector="ListBoxItem:selected:pointerover">
                            <Setter Property="Background" Value="{DynamicResource SystemAccentColorLight1}"/>
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate x:DataType="vm:NavigationItemViewModel">
                            <StackPanel Orientation="Horizontal" Spacing="12">
                                <!-- SVGå›¾æ ‡ -->
                                <Image Width="20" Height="20" 
                                       VerticalAlignment="Center">
                                    <Image.Source>
                                        <MultiBinding Converter="{StaticResource NavigationIconConverter}">
                                            <Binding Path="."/>
                                            <Binding Path="IsSelected" RelativeSource="{RelativeSource AncestorType=ListBoxItem}"/>
                                        </MultiBinding>
                                    </Image.Source>
                                </Image>
                                <TextBlock Text="{Binding Title}" 
                                           FontSize="14" 
                                           VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>

        <!-- å³ä¾§å†…å®¹åŒºåŸŸ -->
        <ContentControl Grid.Column="1" 
                        Content="{Binding CurrentPage}"
                        ContentTemplate="{StaticResource ViewLocator}"/>
    </Grid>

</Window>
